var t = require('tap')
var spawn = require('child_process').spawn
var node = process.execPath
var bin = require.resolve('../bin/which')

function which (args, extraPath, cb) {
  if (typeof extraPath === 'function')
    cb = extraPath, extraPath = null

  var options = {}
  if (extraPath) {
    var sep = process.platform === 'win32' ? ';' : ':'
    var p = process.env.PATH + sep + extraPath
    options.env = Object.keys(process.env).reduce(function (env, k) {
      if (!k.match(/^path$/i))
        env[k] = p